<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ansible_sign.checksum package &mdash; Ansible Sign Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/ansible.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/rtd-ethical-ads.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/images/Ansible-Mark-RGB_Black.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /><!-- extra head elements for Ansible beyond RTD Sphinx Theme -->




</head>

<body class="wy-body-for-nav"><!-- extra body elements for Ansible beyond RTD Sphinx Theme -->



<a class="DocSite-nav" href="https://ansible.github.io/ansible-sign/" style="padding-bottom: 30px;">

  <img class="DocSiteNav-logo"
    src="../_static/images/Ansible-Mark-RGB_White.png"
    alt="Ansible Logo">
  <div class="DocSiteNav-title">Ansible Sign Documentation</div>
</a>
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            ansible-sign
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <label class="sr-only" for="q">Search docs:</label>
    <input type="text" class="st-default-search-input" id="q" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rundown.html">Rundown (CLI Tutorial)</a></li>
</ul>
<!-- extra nav elements for Ansible beyond RTD Sphinx Theme -->

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">ansible-sign</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">ansible_sign.checksum package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/api/ansible_sign.checksum.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">

  
           <div itemprop="articleBody">
             
  <section id="ansible-sign-checksum-package">
<h1>ansible_sign.checksum package<a class="headerlink" href="#ansible-sign-checksum-package" title="Permalink to this heading"></a></h1>
<section id="subpackages">
<h2>Subpackages<a class="headerlink" href="#subpackages" title="Permalink to this heading"></a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ansible_sign.checksum.differ.html">ansible_sign.checksum.differ package</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ansible_sign.checksum.differ.html#submodules">Submodules</a></li>
<li class="toctree-l2"><a class="reference internal" href="ansible_sign.checksum.differ.html#module-ansible_sign.checksum.differ.base">ansible_sign.checksum.differ.base module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.base.ChecksumFileExistenceDiffer"><code class="docutils literal notranslate"><span class="pre">ChecksumFileExistenceDiffer</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.base.ChecksumFileExistenceDiffer.always_added_files"><code class="docutils literal notranslate"><span class="pre">ChecksumFileExistenceDiffer.always_added_files</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.base.ChecksumFileExistenceDiffer.compare_filelist"><code class="docutils literal notranslate"><span class="pre">ChecksumFileExistenceDiffer.compare_filelist()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.base.ChecksumFileExistenceDiffer.gather_files"><code class="docutils literal notranslate"><span class="pre">ChecksumFileExistenceDiffer.gather_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.base.ChecksumFileExistenceDiffer.ignored_paths"><code class="docutils literal notranslate"><span class="pre">ChecksumFileExistenceDiffer.ignored_paths</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.base.ChecksumFileExistenceDiffer.list_files"><code class="docutils literal notranslate"><span class="pre">ChecksumFileExistenceDiffer.list_files()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.base.ChecksumFileExistenceDiffer.warnings"><code class="docutils literal notranslate"><span class="pre">ChecksumFileExistenceDiffer.warnings</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ansible_sign.checksum.differ.html#module-ansible_sign.checksum.differ.distlib_manifest">ansible_sign.checksum.differ.distlib_manifest module</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.distlib_manifest.DistlibManifestChecksumFileExistenceDiffer"><code class="docutils literal notranslate"><span class="pre">DistlibManifestChecksumFileExistenceDiffer</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.distlib_manifest.DistlibManifestChecksumFileExistenceDiffer.always_added_files"><code class="docutils literal notranslate"><span class="pre">DistlibManifestChecksumFileExistenceDiffer.always_added_files</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="ansible_sign.checksum.differ.html#ansible_sign.checksum.differ.distlib_manifest.DistlibManifestChecksumFileExistenceDiffer.gather_files"><code class="docutils literal notranslate"><span class="pre">DistlibManifestChecksumFileExistenceDiffer.gather_files()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ansible_sign.checksum.differ.html#module-ansible_sign.checksum.differ">Module contents</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</section>
<section id="module-ansible_sign.checksum.base">
<span id="ansible-sign-checksum-base-module"></span><h2>ansible_sign.checksum.base module<a class="headerlink" href="#module-ansible_sign.checksum.base" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumFile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ansible_sign.checksum.base.</span></span><span class="sig-name descname"><span class="pre">ChecksumFile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">root</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">differ</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#ChecksumFile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumFile" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.10/library/functions.html#object" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>Slurp a checksum file and be able to check and compare its contents to a
given root directory. Also: be able to write out a checksum file.</p>
<p>We only allow sha256 for now, though supporting 512, etc. would be easy.</p>
<dl class="py method">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumFile.calculate_checksum">
<span class="sig-name descname"><span class="pre">calculate_checksum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#ChecksumFile.calculate_checksum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumFile.calculate_checksum" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumFile.calculate_checksums_from_root">
<span class="sig-name descname"><span class="pre">calculate_checksums_from_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verifying</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#ChecksumFile.calculate_checksums_from_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumFile.calculate_checksums_from_root" title="Permalink to this definition"></a></dt>
<dd><p>Using the root of the project and the differ class passed to the
constructor, iterate over all files in the project and calculate their
checksums. Return a dictionary of the result, keyed on the filename.</p>
<p>Just calling this is not enough in many cases- you want to ensure that
the files in the checksum list are the same ones present in reality.
diff() above does just that. Use that in combination with this method,
or use verify() which does it for you.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumFile.diff">
<span class="sig-name descname"><span class="pre">diff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">paths</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#ChecksumFile.diff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumFile.diff" title="Permalink to this definition"></a></dt>
<dd><p>Given a collection of paths, use the differ to figure out which files
(in reality) have been added/removed from the project root (or latest
SCM tree).</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumFile.differ_warnings">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">differ_warnings</span></span><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumFile.differ_warnings" title="Permalink to this definition"></a></dt>
<dd><p>A differ can store a set of warnings (as strings) in the_differ.warnings
which we can propagate up here. This allows calling code to display any
warnings found during diffing time.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumFile.generate_gnu_style">
<span class="sig-name descname"><span class="pre">generate_gnu_style</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#ChecksumFile.generate_gnu_style"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumFile.generate_gnu_style" title="Permalink to this definition"></a></dt>
<dd><p>Using the root directory and ‘differ’ class given to the constructor,
generate a GNU-style checksum manifest file. This is always generated
from scratch by finding the list of relevant files in the root directory
(by asking the differ), and calculating the checksum for each of them.</p>
<p>The resulting list is always sorted by filename.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumFile.parse">
<span class="sig-name descname"><span class="pre">parse</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">checksum_file_contents</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#ChecksumFile.parse"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumFile.parse" title="Permalink to this definition"></a></dt>
<dd><p>Given a complete checksum manifest as a string, parse it and return a
dict with the result, keyed on each filename or path.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumFile.verify">
<span class="sig-name descname"><span class="pre">verify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parsed_manifest_dct</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">diff</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#ChecksumFile.verify"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumFile.verify" title="Permalink to this definition"></a></dt>
<dd><p>Takes a parsed manifest file (e.g. using parse(), with paths as keys and
checksums as values).</p>
<p>Then calculates the current list of files in the project root. If paths
have been added or removed, ChecksumMismatch is raised.</p>
<p>Otherwise, each the checksum of file in the project root (and subdirs)
is calculated and that result is checked to be equal to the parsed
checksums passed in.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumFile.warnings">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">warnings</span></span><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumFile.warnings" title="Permalink to this definition"></a></dt>
<dd><p>Right now this is just the same as differ_warnings. In the future it
might include warnings that we differ in methods in this class as well.</p>
</dd></dl>

</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.ChecksumMismatch">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ansible_sign.checksum.base.</span></span><span class="sig-name descname"><span class="pre">ChecksumMismatch</span></span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#ChecksumMismatch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.ChecksumMismatch" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.10/library/exceptions.html#Exception" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.InvalidChecksumLine">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ansible_sign.checksum.base.</span></span><span class="sig-name descname"><span class="pre">InvalidChecksumLine</span></span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#InvalidChecksumLine"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.InvalidChecksumLine" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.10/library/exceptions.html#Exception" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
</dd></dl>

<dl class="py exception">
<dt class="sig sig-object py" id="ansible_sign.checksum.base.NoDifferException">
<em class="property"><span class="pre">exception</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">ansible_sign.checksum.base.</span></span><span class="sig-name descname"><span class="pre">NoDifferException</span></span><a class="reference internal" href="../_modules/ansible_sign/checksum/base.html#NoDifferException"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#ansible_sign.checksum.base.NoDifferException" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3.10/library/exceptions.html#Exception" title="(in Python v3.10)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Exception</span></code></a></p>
</dd></dl>

</section>
<section id="module-ansible_sign.checksum">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-ansible_sign.checksum" title="Permalink to this heading"></a></h2>
<p>This package handles checksum validation for Ansible content.</p>
</section>
</section>


           </div>
          </div>
          

<footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Red Hat, Inc..</p>
  </div>

  
   Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
  <a href="https://sphinx-ansible-theme.rtfd.io">Sphinx Ansible Theme</a>
  that is based on the
  <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs theme</a>
  and is maintained by the <a href="https://docs.ansible.com/ansible/4/community/">Ansible Community</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script><!-- extra footer elements for Ansible beyond RTD Sphinx Theme -->

</body>
</html>